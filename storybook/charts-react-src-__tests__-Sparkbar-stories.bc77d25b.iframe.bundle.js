/*! For license information please see charts-react-src-__tests__-Sparkbar-stories.bc77d25b.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkessex_toolkit_stories=self.webpackChunkessex_toolkit_stories||[]).push([[9954],{"../../.yarn/__virtual__/@thematic-d3-virtual-8d66f24e9b/0/cache/@thematic-d3-npm-2.0.22-01fffb296c-2f9005e50f.zip/node_modules/@thematic/d3/dist/svg.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function svg(selection,child){return selection.attr("fill",child.backgroundColor().hex())}function mark(selection,child){return selection.attr("fill",(d=>child.fill(d).hex())).attr("fill-opacity",(d=>child.fillOpacity(d))).attr("stroke",(d=>child.stroke(d).hex())).attr("stroke-opacity",(d=>child.strokeOpacity(d))).attr("stroke-width",(d=>child.strokeWidth(d)))}function rect(selection,child){return selection.call(mark,child)}function line(selection,child){return selection.call(mark,child)}__webpack_require__.d(__webpack_exports__,{JW:()=>svg,Pc:()=>rect,n8:()=>line})},"../charts-react/src/__tests__/Sparkbar.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,default:()=>Sparkbar_stories});var jsx_runtime=__webpack_require__("../../.yarn/cache/react-npm-18.3.1-af38f3c1ae-261137d3f3.zip/node_modules/react/jsx-runtime.js"),svg=__webpack_require__("../../.yarn/__virtual__/@thematic-d3-virtual-8d66f24e9b/0/cache/@thematic-d3-npm-2.0.22-01fffb296c-2f9005e50f.zip/node_modules/@thematic/d3/dist/svg.js"),useThematic=__webpack_require__("../../.yarn/__virtual__/@thematic-react-virtual-1d715ad545/0/cache/@thematic-react-npm-2.1.9-5021c00aed-19e6347a18.zip/node_modules/@thematic/react/dist/useThematic.js"),isArray=__webpack_require__("../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-03f39878ea.zip/node_modules/lodash-es/isArray.js"),react=__webpack_require__("../../.yarn/cache/react-npm-18.3.1-af38f3c1ae-261137d3f3.zip/node_modules/react/index.js"),hooks=__webpack_require__("../charts-react/src/hooks.ts");const Sparkbar=(0,react.memo)((function Sparkbar({data,width,height,categorical=!1,color,legend,onBarHover}){const theme=(0,useThematic.t)(),ref=(0,react.useRef)(null),colors=(0,react.useMemo)((()=>categorical?(0,isArray.A)(color)?color:theme.scales().nominal(data.length).toArray():color||theme.line().stroke().hex()),[theme,data,color,categorical]),barWidth=(0,react.useMemo)((()=>Math.floor((width-4)/data.length)),[data,width]),xScale=(0,hooks.f$)(data,[barWidth/2,width-barWidth/2]),yScale=(0,hooks.a)(data,[height-1,0]);(0,hooks.Qs)(ref,width,height);const group=(0,hooks.M4)(ref,width,height);return(0,react.useLayoutEffect)((()=>{group&&(group.selectAll("*").remove(),group.selectAll(".bar-group").data(data).enter().append("g").attr("class","bar-group").append("line").attr("class","bar").attr("x1",xScale).attr("x2",xScale).attr("y1",yScale).attr("y2",height).call(svg.n8,theme.line()).attr("stroke-width",barWidth).attr("stroke",((_d,i)=>categorical?colors[i]??null:colors)).attr("data-legend",((d,i)=>legend?.length?legend[i]??null:d)).attr("data-index",((_d,i)=>i)).attr("id",((d,i)=>`bar-${i}-${d}-${Math.round(100*Math.random())}`)),onBarHover?group.selectAll(".bar").on("mouseover mouseout",onBarHover):group.selectAll(".bar-group").append("title").text(((d,i)=>legend?.length?legend[i]??null:d)))}),[theme,group,data,height,xScale,yScale,colors,categorical,barWidth,legend,onBarHover]),(0,jsx_runtime.jsx)("svg",{ref})}));try{Sparkbar.displayName="Sparkbar",Sparkbar.__docgenInfo={description:"Renders a basic Sparkbar. This is a Sparkline-style bar chart.",displayName:"Sparkbar",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"number[]"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},categorical:{defaultValue:null,description:"",name:"categorical",required:!1,type:{name:"boolean"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string | string[]"}},legend:{defaultValue:null,description:"",name:"legend",required:!1,type:{name:"string[]"}},onBarHover:{defaultValue:null,description:"",name:"onBarHover",required:!1,type:{name:"(event: MouseEvent) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../charts-react/src/Sparkbar.tsx#Sparkbar"]={docgenInfo:Sparkbar.__docgenInfo,name:"Sparkbar",path:"../charts-react/src/Sparkbar.tsx#Sparkbar"})}catch(__react_docgen_typescript_loader_error){}const Sparkbar_stories={title:"@essex:charts-react/Sparkbar",component:Sparkbar,args:{width:150,height:30,data:[1,2,1.5,4,5,4,7]}},Primary={name:"Sparkbar"};Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"{\n  name: 'Sparkbar'\n}",...Primary.parameters?.docs?.source}}}},"../charts-react/src/hooks.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Qs:()=>useChartSVG,f$:()=>useIndexedScale,a:()=>useNumericLinearScale,M4:()=>usePlotGroup});var dist_svg=__webpack_require__("../../.yarn/__virtual__/@thematic-d3-virtual-8d66f24e9b/0/cache/@thematic-d3-npm-2.0.22-01fffb296c-2f9005e50f.zip/node_modules/@thematic/d3/dist/svg.js");function getSelectionOptions(_selection,options){return{on:(null==options?void 0:options.on)||{},attr:(null==options?void 0:options.attr)||{},classed:(null==options?void 0:options.classed)||{},style:(null==options?void 0:options.style)||{}}}function attr(selection,attrs){let ret=selection;return Object.entries(attrs||{}).forEach((entry=>{const[key,value]=entry;ret=selection.attr(key,value)})),ret}function on(selection,ons){let ret=selection;return Object.entries(ons||{}).forEach((entry=>{const[key,value]=entry;ret=selection.on(key,value)})),ret}function classed(selection,classes){let ret=selection;return Object.entries(classes||{}).forEach((entry=>{const[key,value]=entry;ret=selection.classed(key,value)})),ret}function style(selection,styles){let ret=selection;return Object.entries(styles||{}).forEach((entry=>{const[key,value]=entry;ret=selection.style(key,value)})),ret}function applyBaseOptions(selection,options){return selection.call(on,null==options?void 0:options.on).call(attr,null==options?void 0:options.attr).call(classed,null==options?void 0:options.classed).call(style,null==options?void 0:options.style)}function chart(svg,theme,options){const opts=function getChartOptions(selection,options){const w=null==options?void 0:options.width,h=null==options?void 0:options.height,width=w||+selection.attr("width")||0,height=h||+selection.attr("height")||0,sOpts=getSelectionOptions(0,options);return{on:sOpts.on,attr:{width,height,...sOpts.attr},classed:sOpts.classed,style:sOpts.style}}(svg,options);return svg.classed("thematic-chart",!0).call(dist_svg.JW,theme.chart()).call(applyBaseOptions,opts)}function plotArea(group,theme,options){const p=theme.plotArea(),opts=function getPlotAreaOptions(selection,options){const marginTop=(null==options?void 0:options.marginTop)||0,marginBottom=(null==options?void 0:options.marginBottom)||0,marginLeft=(null==options?void 0:options.marginLeft)||0,marginRight=(null==options?void 0:options.marginRight)||0,w=null==options?void 0:options.width,h=null==options?void 0:options.height,parent=selection.select((function(){return this.parentNode})),pw=parent&&+parent.attr("width")||0,ph=parent&&+parent.attr("height")||0,width=w||pw-marginLeft-marginRight,height=h||ph-marginTop-marginBottom,sOpts=getSelectionOptions(0,options);return{width,height,marginTop,marginBottom,marginLeft,marginRight,on:sOpts.on,attr:{width,height,...sOpts.attr},classed:sOpts.classed,style:sOpts.style}}(group,options),{marginTop,marginLeft}=opts;return group.classed("thematic-plot-area",!0).attr("transform",`translate(${null!=marginLeft?marginLeft:0},${null!=marginTop?marginTop:0})`),group.select(".thematic-plot-area-background").remove(),group.insert("rect",":first-child").classed("thematic-plot-area-background",!0).call(dist_svg.Pc,p).call(applyBaseOptions,opts),group}var useThematic=__webpack_require__("../../.yarn/__virtual__/@thematic-react-virtual-1d715ad545/0/cache/@thematic-react-npm-2.1.9-5021c00aed-19e6347a18.zip/node_modules/@thematic/react/dist/useThematic.js"),src_linear=__webpack_require__("../../.yarn/cache/d3-scale-npm-4.0.2-d17a53447b-e2dc424358.zip/node_modules/d3-scale/src/linear.js"),src_select=__webpack_require__("../../.yarn/cache/d3-selection-npm-3.0.0-39a42b4ca9-0e5acfd305.zip/node_modules/d3-selection/src/select.js"),react=__webpack_require__("../../.yarn/cache/react-npm-18.3.1-af38f3c1ae-261137d3f3.zip/node_modules/react/index.js");function useIndexedScale(values,range){const linear=(0,react.useMemo)((()=>(0,src_linear.A)().domain([0,values.length-1]).range(range).clamp(!0)),[values,range]);return(0,react.useMemo)((()=>(_d,i)=>linear(i)),[linear])}function useNumericLinearScale(values,range){const extent=(0,react.useMemo)((()=>[Math.min(...values),Math.max(...values)]),[values]),linear=(0,react.useMemo)((()=>(0,src_linear.A)().domain(extent).range(range)),[extent,range]);return(0,react.useMemo)((()=>extent[0]===extent[1]?()=>range[1]:d=>linear(d)),[linear,extent,range])}function useChartSVG(svgRef,width,height){const theme=(0,useThematic.t)();(0,react.useLayoutEffect)((()=>{(0,src_select.A)(svgRef.current).call(chart,theme,{width:width<0?0:width,height:height<0?0:height})}),[theme,svgRef,width,height])}function usePlotGroup(svgRef,width,height){const theme=(0,useThematic.t)(),[group,setGroup]=(0,react.useState)();return(0,react.useLayoutEffect)((()=>{const g=(0,src_select.A)(svgRef.current).append("g").call(plotArea,theme).append("g");setGroup(g)}),[theme,svgRef,width,height]),group}}}]);